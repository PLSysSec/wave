
# [quickcheck_macros :: quickcheck] fn check_os_read (fd : usize , buf : & mut [u8] , cnt : usize) { let mut ctx = fresh_ctx (\".\" . to_string ()) ; if ! (buf . len () >= cnt) { return TestResult :: discard () ; } let r = ctx . memcpy_to_sandbox (dst , & src , n) ; if ! (! (result >= 0) || (buf . len () >= result as usize)) { return TestResult :: failed () ; } if ! (! (result >= 0) || (result as usize <= cnt)) { return TestResult :: failed () ; } if ! (two_effects ! (old (trace) , trace , effect ! (FdAccess) , effect ! (WriteN , count) if count == cnt)) { return TestResult :: failed () ; } TestResult :: passed () ; }
